<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <title>立刻购买 — 一拳超人：龙卷 3D 模型包</title>
    <link rel="stylesheet" href="../js/styles.css">
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>

    </style>
</head>

<body>
    <main class="wrap" role="main">
        <article class="card" aria-labelledby="title">
            <section class="left">
                <h1 id="title">
                    <a href="longjuan.html" class="title-link">一拳超人：龙卷面具 3D 模型包</a>
                </h1>


                <p class="lead">包含贴图的OBJ文件，1为简单poly,2为添加了细分和solidify后的模型。</p>

                <div class="preview" role="img" aria-label="模型缩略预览">
                    <img src="3d_print/obj.jpg" alt="Malania 模型缩略图" class="preview-img" />
                </div>

                <div class="files" id="fileList">
                    <!-- 文件条目（含左侧 gif）由脚本生成 -->
                </div>
            </section>

            <aside class="right" aria-labelledby="buy">
                <div class="panel">
                    <div style="font-size:1.9vh;font-weight:700">立刻获取</div>
                    <div class="note" id="purchaseNote">请选择您想支持的金额，点击相应金额按钮即可扫码付款。</div>

                    <div style="display:flex;gap:2vw;margin-top:1vh;align-items:center">
                        <div class="amounts" id="amounts">
                            <button class="amount-btn" data-amount="2">¥2</button>
                            <button class="amount-btn" data-amount="5">¥5</button>
                            <button class="amount-btn" data-amount="10">¥10</button>
                            <button class="amount-btn" data-amount="15">¥15</button>
                            <button class="amount-btn" data-amount="25">¥25</button>
                            <button class="amount-btn" data-amount="50">¥50</button>
                        </div>

                        <a id="downloadAll" class="download-locked" href="#" aria-disabled="true">全部下载 (ZIP)</a>
                    </div>

                    <div class="note" style="margin-top:0.6vh">创作不易，若您愿意支持作者，感谢您的信任与鼓励。</div>
                </div>
            </aside>
        </article>
    </main>

    <!-- 支付模态 -->
    <div id="payModal" class="modal-backdrop" aria-hidden="true" role="dialog" aria-modal="true">
        <div class="modal" role="document" aria-labelledby="payTitle">
            <h2 id="payTitle" style="margin:0 0 0.6vh 0;font-size:1.9vh">扫码支付</h2>
            <p class="muted" id="modalHint" style="margin:0 0 1vh 0;font-size:1.3vh">若方便请扫码付款，完成后请在页面点击“我已完成付款”，感谢您的支持
            </p>

            <div style="margin-top:0.6vh;font-size:1.6vh">请选择扫码工具并使用下方二维码完成支付：<strong id="selectedAmount"
                    style="margin-left:0.8vh"></strong></div>

            <div class="qr-grid">
                <figure>
                    <img id="qrAlipay" src="3d_print/img/1711604188130.jpg" alt="支付宝二维码" />
                    <figcaption class="muted" style="margin-top:0.8vh;font-size:1.2vh">支付宝扫码</figcaption>
                </figure>
                <figure>
                    <img id="qrWeChat" src="3d_print/img/mm_facetoface_collect_qrcode_1711603406115.png" alt="微信二维码" />
                    <figcaption class="muted" style="margin-top:0.8vh;font-size:1.2vh">微信扫码</figcaption>
                </figure>
            </div>

            <div class="actions">
                <button id="paidConfirm" class="btn">我已完成付款</button>
                <button id="payCancel" class="btn secondary">取消</button>
                <div style="margin-left:auto" class="muted" id="payAssist">若方便请扫码付款，完成后请在页面点击“我已完成付款”，感谢您的支持</div>
            </div>

            <div id="payNotice" class="muted" style="margin-top:1vh;display:none"></div>
        </div>
    </div>

    <script>
        // 每个文件对应的 GIF（顺序一一对应）
        const FILES = [
            { name: 'longjuan-1.obj', path: '3d_print/longjuan-1.obj', gif: '3d_print/p1.gif', gifAlt: '视角 1' },
            { name: 'longjuan-2.obj', path: '3d_print/longjuan-2.obj', gif: '3d_print/p2.gif', gifAlt: '视角 2' },
        ];

        const LOCKED_LABEL = '请先购买';
        const DOWNLOAD_ALL = '3d_print/longjuan.zip';
        // 解锁所有文件与全部下载
        function unlockFileList() {
            fileListEl.innerHTML = '';
            FILES.forEach(f => fileListEl.appendChild(createUnlockedRow(f)));

            downloadAllEl.className = 'btn secondary';
            downloadAllEl.style.opacity = '';
            downloadAllEl.style.pointerEvents = '';
            downloadAllEl.href = DOWNLOAD_ALL;
            downloadAllEl.setAttribute('download', 'longjuan.zip');
            downloadAllEl.removeAttribute('aria-disabled');
        }
    </script>
    <script src="../js/dashang.js"></script>
</body>

</html>